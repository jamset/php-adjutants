##Фрактальная структура папок

Фрактальная структура папок позволяет с большей простотой соблюдать принцип 
[DIP](https://en.wikipedia.org/wiki/Dependency_inversion_principle) из SOLID.

При создании сервисов сразу создавать структуру в рамках корректной иерархии, взаимосвязи классов.
 
С возможностью после завершения разработки сервиса быстро разнести папки по пакетам, с минимальной вероятностью 
 необходимости рефакторинга.

Фрактальная структура предполагает возможность наличия нескольких уровней папок, где на каждом уровне возможны папки с 
именами Abstracts, Interfaces, Inventory (в нем Exceptions, опциально Constants и папки, специфичные для сервиса).

И каждый уровень - это отдельный уровень конкретизации/абстракции. Нахождение папки глубже/ниже по иерархии означает,
что она зависима от более вышестоящих уровней.

Например, в Symfony

Abstracts

Interfaces

Inventory

Bundle1/

    Service/ - уровень "пакета", всё, что в <ServiceName> - самостоятельные "пакеты"
        Abstracts
        Interfaces
        Inventory
            Constants - опционально
            Exceptions
        <ServiceName> - уровень "пакета"
            Abstracts
            Interfaces
            Inventory
                Constants 
                Exceptions
            SomeHandler.php
            SomeFactory.php
            SomeSecondResolver.php
        <ServiceName>
            Abstracts
            Interfaces
            Inventory
                Exceptions
            OtherHandler.php
            OtherFirstResolver.php
            <ServiceName> - уровень "пакета"
                Abstracts
                Interfaces
                Inventory
                    Exceptions
                NestedHandler.php
                NestedFirstResolver.php        
               
   
###Размещение файлов        
        
В папке Abstracts находятся только абстрактные классы. Абстрактный класс всегда обозначается префиксом Base (за исключением
случаев, когда это невозможно в силу ограничений фреймворка и т.п.).

В папке Interfaces располагаются только интерфейсы.

В Inventory помещаются классы DTO, константы (если для них не создана специальная папка), и Keepers. Keepers - классы, содержащие в свойствах массивы, для которых важен состав (и, опционально, порядок расположения).

В корне ServiceName находятся классы с постфиксом Handler, Resolver или Helper, а также классы в рамках GOF (Factory и т.п.) 

Handler является классом, инкапсулирующим резолверы.

Helper - класс со статическими методами, относящихся к сервису на его уровне абстракции.

Без постфикса - имя сервиса, в который инкапсулирован handler. 
Сервис инкапсулирован в контроллер.

При этом, каждому методу контроллера соответствует один класс сервиса.

Например, методу getCurrencyRate() контроллера соответствует класс сервиса GetCurrencyRate, отнаследованный от абстрактного 
класса BaseCurrencyService. В конструкторе которого происходит инкапсуляция CurrencyHandler.

###Соотношение классов

Классы одного уровня могут зависеть друг от друга.

Если один класс ссылается на класс из папки одного уровня, значит этот "пакет" при выносе в отдельный репозиторий будет
зависеть от другого. 

Перекрестные ссылки не допускаются, т.к. получилась бы цикличная зависимость при выносе в отдельные репозитории, 
и значит либо это должен быть один пакет (один сервис), либо что-то нужно вынести на более вышестоящий уровень, 
общий для этих двух "пакетов". 

Абстрактные классы вышестоящих уровней не могут зависеть от классов сервисов, абстрактных или обычных, 
т.к. последние находятся уровнем ниже.

Абстрактные классы могут зависеть от абстрактных классов, inventory или интерфейсов одного с ними или более вышестоящего 
уровня.

Также допускается зависимость абстрактных классов сервиса от классов сервиса.

###Именование

Имена классов сервиса, если они отнаследованы от базовых (абстрактных) классов более вышестоящего уровня, содержат в себе
часть имени базового класса или соотносятся с ним семантически/категориально.

Cars\
    Abstracts\BaseCars  (extends BaseService) 
    CarsHandler.php (extends BaseRequestHandler)
    HondaHandler.php (extends CarsHandler)
    EngineResolver.php
    CarsHelper.php
    SaveCar.php (extends BaseCars)
    GetCars.php (extends BaseCars)
